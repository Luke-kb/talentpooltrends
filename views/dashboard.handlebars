<h1 class="mt-4">Dashboard</h1>
<p class="lead mb-3"> Welcome</p>


<form class="form-inline" action="/api/searchBy" method="POST">
    <input class="form-control mr-sm-2" type="search" placeholder="Search by title, skill or company"
        aria-label="Search" id="position" name="position">
    <input class="form-control mr-sm-2" type="search" placeholder="Search by city, state or country" aria-label="Search"
        id="location" name="location">
    <button class="btn btn-primary my-2 my-sm-0" type="submit">Search</button>
</form>
<br>
<h3>Counts: SeekAus => {{parsedSeekAus.jobs.length}}, IndeedAUS: {{parsedIndeedAus.jobs.length}}, UK:
    {{parsedIndeedUk.jobs.length}}, USA: {{parsedIndeedUsa.jobs.length}}
</h3>
<h4>Technology: {{tech}}</h4>

<div class="row">
    <div class="col-8 ">
        {{#each set}}
        <h3>Jobs List from {{this.__CLASS__}} </h3>

        <div class="card w-75 border-0">
            <div class="card-body">
                <h5 class="card-title">Company: {{this.company.display_name}}</h5>
                <p class="card-text">
                    City:{{this.location.display_name}}
                    Country:{{this.location.area}}
                </p>
                <div class="card-footer bg-transparent border-success">
                    <a href="{{this.redirect_url}} ">Reference</a>
                </div>
            </div>
        </div>
        {{/each}}
    </div>
    <div class="col-4">
        <input id="aus" type="hidden" value={{parsedSeekAus.jobs.length}} aria-hidden="true"><br><br>
        <input id="uk" type="hidden" value={{parsedIndeedUk.jobs.length}} aria-hidden="true"><br><br>
        <input id="usa" type="hidden" value={{parsedIndeedUsa.jobs.length}} aria-hidden="true"><br><br>
        <button class="btn btn-primary my-2 my-sm-0" type="submit" id="buttonId">Trend Graphs</button>

        <div class="card card-body border-0">
            <div id="chart">
            </div>
        </div>
        <div class="card card-body border-0">
            <div id="chart1">
            </div>

        </div>
        <div class="card card-body border-0">
            <div id="chart2">
            </div>
        </div>
    </div>

</div>
</div>
</div>

<script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>

<script>

    document.querySelector('#buttonId').addEventListener("click", function () {
        let aus = document.querySelector('#aus').value;
        let uk = document.querySelector('#uk').value;
        let usa = document.querySelector('#usa').value;


        var options = {
            chart: {
                type: 'line'
            },
            series: [{
                name: 'jobs',
                data: [aus, uk, usa]
            }],
            xaxis: {
                countries: ['AU', 'UK', 'USA']
            }
        }
aus=aus/10;
uk=uk/10;
usa=usa/10;
let data=[aus, uk, usa]

        var chart = new ApexCharts(document.querySelector("#chart"), options);
        chart.render();


        var options = {
            series: data,
            chart: {
                width: 380,
                type: 'pie',
            },
            labels: ['AUS', 'UK', 'USA'],
            responsive: [{
                breakpoint: 480,
                options: {
                    chart: {
                        width: 200
                    },
                    legend: {
                        position: 'bottom'
                    }
                }
            }]
        };
        let chart1 = new ApexCharts(document.querySelector("#chart1"), options);
        let chart2 = new ApexCharts(document.querySelector("#chart2"), options);



        {{!-- chart.render(); --}}
        chart1.render();
        chart2.render();

    });

</script>

<a href="/users/logout" class="btn btn-secondary">Logout</a>